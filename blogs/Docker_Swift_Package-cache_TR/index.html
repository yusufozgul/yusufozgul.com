<!DOCTYPE html><html lang="tr"><head><meta charset="UTF-8"/><meta property="og:site_name" content="Yusuf Özgül | Blog | Resume | Portfolio"/><link rel="canonical" href="https://yusufozgul.com/blogs/Docker_Swift_Package-cache_TR"/><meta name="twitter:url" content="https://yusufozgul.com/blogs/Docker_Swift_Package-cache_TR"/><meta property="og:url" content="https://yusufozgul.com/blogs/Docker_Swift_Package-cache_TR"/><title>Docker ile Swift Kütüphaneleri Cache'ten okuma | Yusuf Özgül | Blog | Resume | Portfolio</title><meta name="twitter:title" content="Docker ile Swift Kütüphaneleri Cache'ten okuma | Yusuf Özgül | Blog | Resume | Portfolio"/><meta property="og:title" content="Docker ile Swift Kütüphaneleri Cache'ten okuma | Yusuf Özgül | Blog | Resume | Portfolio"/><meta name="description" content="Docker üzerinde swift projelerimizi build alırken kütüphaneleri nasıl cache'te saklayabiliriz?"/><meta name="twitter:description" content="Docker üzerinde swift projelerimizi build alırken kütüphaneleri nasıl cache'te saklayabiliriz?"/><meta property="og:description" content="Docker üzerinde swift projelerimizi build alırken kütüphaneleri nasıl cache'te saklayabiliriz?"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/gallery.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/upload-images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Yusuf Özgül | Blog | Resume | Portfolio"/><meta name="twitter:image" content="https://yusufozgul.com/upload-images/"/><meta property="og:image" content="https://yusufozgul.com/upload-images/"/></head><body class="main-wrapper"><header><link rel="stylesheet" href="/navigationStyle.css" type="text/css"/><nav class="header navBar"><div class="navArea"><input type="checkbox" id="check"/><label for="check"><img src="/upload-images/base/menu-icon.svg" width="30" height="30" class="checkbtn"/></label><label class="logo"><a href="/">Yusuf Özgül</a></label><ul class="navContent" id="hoverEnabled"><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li><li><a href="/projects">Projects</a></li><li><a href="/blogs" class="active">Blog</a></li></ul></div></nav></header><div class="wrapper"><h2 class="post-title">Docker ile Swift Kütüphaneleri Cache'ten okuma</h2><a><p>May 16, 2021<br/>Reading 5 minutes</p></a><ul class="tag-list"><li class="swift"><a href="/tags/swift">Swift</a></li><li class="docker"><a href="/tags/docker">Docker</a></li></ul><div class="post-description"><div><p>Yaptığım küçük bir Vapor projesini docker kullanarak ayağa kaldırdım, ancak değişikliklerden sonra her build sırasında hiç değişmeyen kütüphaneler sürekli yeniden indiriliyordu ve hem network hem de zaman kaybına sebep oluyordu.</p><h3>Peki bunu çözmek için ne yapabiliriz?</h3><p>Aslında oldukça kolay, Docker her stepte dosyaların değişime göre karar işlem yapıyor. Yani bizim projemizi hiç değiştirmesek kütüphaneleri cache'ten alacaktı ama dosyalarımız değişiyor. O halde bizde sadece değişmeyenleri önce kopyalasak ardından geri kalanı kopyalasak nasıl olur?</p><pre><code># <span class="type">Copy</span> entire repo into container
<span class="type">COPY</span> . .

# <span class="type">Compile
RUN</span> swift build -c release -<span class="type">Xswiftc</span> -g
</code></pre><p>Copy ile tüm dosyaları container içine kopyaladık ve swift build komutunu çağırdık. Tamamen en baştan build alacağı için önce kütüphaneleri indirip ardından build alacak.</p><pre><code># <span class="type">Copy</span> swift package file
<span class="type">COPY Package</span>.<span class="property">swift</span> .

# <span class="type">Download</span> swift packages
<span class="type">RUN</span> swift package resolve
</code></pre><p>Tüm dosyalarımı kopyalamadan önce sadece Package.swift dosyamızı kopyalarsak ve swift package resolve komutunu çağırırsak sadece kütüphaneler indirilir. Ardından build sırasında bu kütüphaneler tekrar indirilmez ve kullanılmaya devam edilir.</p><p>Peki bir sonraki build sırasında ne olur?</p><p>Sadece Package.swift dosyasını kopyaladık ve kütüphaneleri indirmesini söyledik. Buraya kadar olan kısımlar önceki build ile aynı dosyamız değişmedi çünkü. Bu durumda docker gidip cache'ten bunları okuyup geçecek ve böylece network ve zamandan kazanmış olacağız.</p><p>Bu kısa yazıda Docker'da swift package için optimizasyonu anlattım, okuduğunuz için teşekkür ederim.</p></div></div></div><footer><p><a href="https://github.com/johnsundell/publish">Generated using Publish</a></p><p><a href="/feed.rss">RSS feed</a></p><p><a href="https://github.com/yusufozgul">Developed Yusuf Özgül</a></p></footer></body></html>