<!DOCTYPE html><html lang="tr"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Yusuf Özgül | Blog | Resume | Portfolio"/><link rel="canonical" href="https://yusufozgul.com/blogs/Publish-Metadata"/><meta name="twitter:url" content="https://yusufozgul.com/blogs/Publish-Metadata"/><meta name="og:url" content="https://yusufozgul.com/blogs/Publish-Metadata"/><title>Publish Metadata | Yusuf Özgül | Blog | Resume | Portfolio</title><meta name="twitter:title" content="Publish Metadata | Yusuf Özgül | Blog | Resume | Portfolio"/><meta name="og:title" content="Publish Metadata | Yusuf Özgül | Blog | Resume | Portfolio"/><meta name="description" content="Publish'e metadata kullanarak yeni özellikler ekleyelim."/><meta name="twitter:description" content="Publish'e metadata kullanarak yeni özellikler ekleyelim."/><meta name="og:description" content="Publish'e metadata kullanarak yeni özellikler ekleyelim."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/gallery.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/upload-images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Yusuf Özgül | Blog | Resume | Portfolio"/><meta name="twitter:image" content="https://yusufozgul.com/upload-images/"/><meta name="og:image" content="https://yusufozgul.com/upload-images/"/></head><body class="main-wrapper"><header><link rel="stylesheet" href="/navigationStyle.css" type="text/css"/><nav class="header navBar"><div class="navArea"><input type="checkbox" id="check"/><label for="check"><img src="/upload-images/base/menu-icon.svg" width="30" height="30" class="checkbtn"/></label><label class="logo"><a href="/">Yusuf Özgül</a></label><ul class="navContent" id="hoverEnabled"><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li><li><a href="/projects">Projects</a></li><li><a href="/blogs" class="active">Blog</a></li></ul></div></nav></header><div class="wrapper"><h2 class="post-title">Publish Metadata</h2><a><p>March 21, 2021<br/>Reading 9 minutes</p></a><ul class="tag-list"><li class="swift"><a href="/tags/swift">Swift</a></li><li class="publish"><a href="/tags/publish">Publish</a></li></ul><div class="post-description"><div><p>Bir önceki yazımda Publish ile nasıl swift ile static web siteleri oluşturabilirizden bahsetmiştim, okumadıysanız: <a href="https://yusufozgul.com/blogs/PublishNedirNasilKullanilir/">Publish Nedir Nasil Kullanilir</a>. Publish'e draft ve zamanlanmış yazılar özelliğini nasıl getirebiliriz? Benim kullandığım eklentilerin nasıl kullanılacağını yazdığım samples adında bir yazı var, haliyle bu yazının yayınlanmasını istemiyorum. Bu sorunu çözmek için Publish'e iki adet pr açılmış ancak her ikiside kabul edilmemiş. Sebebi ise bunun zaten kolayca yapılabiliyor olması. Hadi nasıl yapılır bakalım.</p><p>Bir yazı oluştururken en başına aşağıdaki gibi bir alan ekliyoruz. Bu alan başlık, açıklama, tarih ve tag'lerden oluşuyor.</p><pre><code>---
title: <span class="type">Swift</span> ile <span class="type">Web Site Oluşturmak</span>
date: <span class="number">2021</span>-<span class="number">03</span>-<span class="number">20 10</span>:<span class="number">08</span>
tags: <span class="type">Swift</span>, <span class="type">Publish</span>
description: <span class="type">Swift</span>'i kullanarak nasıl statik web sayfaları oluşturabiliriz, nasıl hiç js kullanmadan bu yazıyı okuduğunuz site gibi siteler oluşturabiliriz?
---
</code></pre><p>Bu girdiler aslında birer metadata, peki biz burayı zenginleştiremez miyiz? Elbette yapabiliriz.</p><h3>Draft Özelliği:</h3><p>Sık yazı yazıyorsanız bazen bir yazı devam ederken bir yazı yazıyor olabilirsiniz ya da benim gibi eklentilerin nasıl kullanılacağını belirten örnek bir yazınız olabilir, her iki durumda da bu yazıların deploy edilmemesi gerekir.</p><ol><li>Yeni bir metadata ekleyelim:</li></ol><p>Yazının metadatalar kısmına yeni bir metadata ekleyelim.</p><pre><code>isDraft: <span class="keyword">true</span>
</code></pre><ol start="2"><li>Metadatayı tanımlayalım:</li></ol><p>WebSite struct'ının içerisinde metadata için bir struct daha bulunacak. Buraya yeni metadatayı ekleyelim.</p><pre><code><span class="keyword">struct</span> ItemMetadata: <span class="type">WebsiteItemMetadata</span> {
			<span class="keyword">let</span> isDraft: <span class="type">Bool</span>?
}
</code></pre><p>Nullable yaptım çünkü sadece draft olan yazıları belirmek yeterli olsun diye.</p><ol start="3"><li>Metadata kontrolü yapalım:</li></ol><p>Publish derlenirken eklentileri verdiğimiz, adımları belirlediğimiz kısma yeni bir alan ekleyeceğiz.</p><pre><code><span class="keyword">try</span> <span class="type">YusufozgulCom</span>().<span class="call">publish</span>(withTheme: .<span class="dotAccess">yusufozgulcom</span>,
                            rssFeedSections: [.<span class="dotAccess">blogs</span>, .<span class="dotAccess">projects</span>],
                            additionalSteps: [...
                                                .<span class="call">removeAllItems</span>(in: .<span class="dotAccess">blogs</span>, matching: .<span class="keyword">init</span>(matcher: { item <span class="keyword">in</span>
                                                    item.<span class="property">metadata</span>.<span class="property">isDraft</span> ?? <span class="keyword">false</span>
                                                }))
                            ],
                            plugins: [...])
</code></pre><p>RemoveAllItems ile geriye bool dönerek yazının silinmesini ya da silinmemesini belirtiyoruz. Böylece yazı draft ise deploy ederken yazıyı göndermemiş oluyoruz.</p><h3>Zamanlanmış Yazılar:</h3><p>Bu özellik aslında yukarıdaki adımlarla birebir aynı şekilde. Yazılarımızda zaten date metadatasını kullanıyoruz. Kendi Metadata struct'ımıza da date ekleyip removeAllItems kısmında bu date'i formatlayıp bulunduğumuz günden ileride ise yazının yayınlanmasını engelleyebiliriz. Başka bir senaryoda belirli süreden sonra yazıları arşivleyebiliriz ya da yazıları arşivler kısmında göstermek gibi işlemler yapabiliriz.</p><p>Bu yazıda ihtiyacım olan bir özelliği nasıl getirdiğimi paylaşmak istedim. Yukarıda bahsettiğim iki pr'ın linklerini aşağıya ekliyorum, dilerseniz oradaki konuşmaları okuyabilirsiniz. Teşekkür ederim.</p><hr><hr><p><a href="https://github.com/JohnSundell/Publish/pull/89">Add draft support for Markdown Content by mimorocks · Pull Request #89 · JohnSundell/Publish</a></p><p><a href="https://github.com/JohnSundell/Publish/pull/94">Allow user to have draft content excluded from Output by Kilo-Loco · Pull Request #94 · JohnSundell/Publish</a></p></div></div></div><footer><p><a href="https://github.com/johnsundell/publish">Generated using Publish</a></p><p><a href="/feed.rss">RSS feed</a></p><p><a href="https://github.com/yusufozgul">Developed Yusuf Özgül</a></p></footer></body></html>