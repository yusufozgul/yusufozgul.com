<!DOCTYPE html><html lang="tr"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio"/><link rel="canonical" href="https://yusufozgul.com/blogs/SigninWithApple"/><meta name="twitter:url" content="https://yusufozgul.com/blogs/SigninWithApple"/><meta name="og:url" content="https://yusufozgul.com/blogs/SigninWithApple"/><title>Sign in with Apple NasÄ±l KullanÄ±lÄ±r? | Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio</title><meta name="twitter:title" content="Sign in with Apple NasÄ±l KullanÄ±lÄ±r? | Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio"/><meta name="og:title" content="Sign in with Apple NasÄ±l KullanÄ±lÄ±r? | Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio"/><meta name="description" content="Sign in with Apple Ã¶zelliÄŸi WWDC 2019â€™da tanÄ±tÄ±ldÄ±ÄŸÄ±nda diÄŸer bir Ã§ok Ã¼Ã§Ã¼ncÃ¼ parti giriÅŸ servislerinden Ã§ok daha iyi Ã¶zellikleriyle geldi. Vermek istediÄŸiniz bilgileri kontrol edebilmek araya bir email yÃ¶nlendirmesi koymak gibi. Gizlilik konusunda atÄ±lan bu gÃ¼zel adÄ±mda Appleâ€™a gÃ¼venebildiÄŸimiz kadar gizliliÄŸimizi korumuÅŸ oluyoruz."/><meta name="twitter:description" content="Sign in with Apple Ã¶zelliÄŸi WWDC 2019â€™da tanÄ±tÄ±ldÄ±ÄŸÄ±nda diÄŸer bir Ã§ok Ã¼Ã§Ã¼ncÃ¼ parti giriÅŸ servislerinden Ã§ok daha iyi Ã¶zellikleriyle geldi. Vermek istediÄŸiniz bilgileri kontrol edebilmek araya bir email yÃ¶nlendirmesi koymak gibi. Gizlilik konusunda atÄ±lan bu gÃ¼zel adÄ±mda Appleâ€™a gÃ¼venebildiÄŸimiz kadar gizliliÄŸimizi korumuÅŸ oluyoruz."/><meta name="og:description" content="Sign in with Apple Ã¶zelliÄŸi WWDC 2019â€™da tanÄ±tÄ±ldÄ±ÄŸÄ±nda diÄŸer bir Ã§ok Ã¼Ã§Ã¼ncÃ¼ parti giriÅŸ servislerinden Ã§ok daha iyi Ã¶zellikleriyle geldi. Vermek istediÄŸiniz bilgileri kontrol edebilmek araya bir email yÃ¶nlendirmesi koymak gibi. Gizlilik konusunda atÄ±lan bu gÃ¼zel adÄ±mda Appleâ€™a gÃ¼venebildiÄŸimiz kadar gizliliÄŸimizi korumuÅŸ oluyoruz."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/gallery.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/upload-images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio"/><meta name="twitter:image" content="https://yusufozgul.com/upload-images/"/><meta name="og:image" content="https://yusufozgul.com/upload-images/"/></head><body class="main-wrapper"><header><link rel="stylesheet" href="/navigationStyle.css" type="text/css"/><nav class="header navBar"><div class="navArea"><input type="checkbox" id="check"/><label for="check"><img src="/upload-images/base/menu-icon.svg" width="30" height="30" class="checkbtn"/></label><label class="logo"><a href="/">Yusuf Ã–zgÃ¼l</a></label><ul class="navContent" id="hoverEnabled"><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li><li><a href="/projects">Projects</a></li><li><a href="/blogs" class="active">Blog</a></li></ul></div></nav></header><div class="wrapper"><h2 class="post-title">Sign in with Apple NasÄ±l KullanÄ±lÄ±r?</h2><a><p>June 5, 2019<br/>Reading 14 minutes</p></a><ul class="tag-list"><li class="swift"><a href="/tags/swift">Swift</a></li><li class="apple"><a href="/tags/apple">Apple</a></li><li class="other"><a href="/tags/sign-in-with-apple">Sign in with Apple</a></li><li class="other"><a href="/tags/auth">Auth</a></li></ul><div class="post-description"><div><p>Sign in with Apple Ã¶zelliÄŸi WWDC 2019â€™da tanÄ±tÄ±ldÄ±ÄŸÄ±nda diÄŸer bir Ã§ok Ã¼Ã§Ã¼ncÃ¼ parti giriÅŸ servislerinden Ã§ok daha iyi Ã¶zellikleriyle geldi. Vermek istediÄŸiniz bilgileri kontrol edebilmek araya bir email yÃ¶nlendirmesi koymak gibi. Gizlilik konusunda atÄ±lan bu gÃ¼zel adÄ±mda Appleâ€™a gÃ¼venebildiÄŸimiz kadar gizliliÄŸimizi korumuÅŸ oluyoruz. ArtÄ±k kullanmadÄ±ÄŸÄ±mÄ±z, hesabÄ±mÄ±zÄ± kapattÄ±ÄŸÄ±mÄ±z hizmetlerden spam mailler almayacaÄŸÄ±z. Birde hangi uygulamalar bilgilerimizi satÄ±yor gÃ¶rebileceÄŸiz ğŸ™‚</p><p>YÄ±l sonuna kadar bu Ã¶zellik uygulamada Ã¼Ã§Ã¼ncÃ¼ parti giriÅŸ hizmeti kullananlar iÃ§in zorunlu olacak, Apple bazen gerekli konularda iyi yaptÄ±rÄ±mlar uyguluyor. Hadi ÅŸimdi bu Ã¶zelliÄŸi nasÄ±l kolayca uygulamamÄ±za ekleyebileceÄŸimize bakalÄ±m.</p><p>BaÅŸlamadan eklemek istediÄŸim ÅŸeyler var:</p><ul><li>Bu Ã¶zellik iOS 13 ve daha Ã¼st sÃ¼rÃ¼m gerektirir.</li><li>UygulamanÄ±z UIKit kullansa bile kullanabilirsiniz.</li><li>Xcode 11 kullanmanÄ±z gerekmektedir.</li><li>Son olarak yayÄ±nlanmÄ±ÅŸ son Apple GeliÅŸtirici ÅartlarÄ±nÄ± kabul etmelisiniz.</li></ul><p>Bu arada karÅŸÄ±laÅŸtÄ±ÄŸÄ±m bir sorun bu Ã¶zellik Ã¼cretsiz hesap ile geliÅŸtirme yapÄ±yorsanÄ±z kullanÄ±lamÄ±yor. developer.apple.comâ€™da son GeliÅŸtirici ÅartlarÄ± gÃ¶rÃ¼nmÃ¼yor. Developer hesabÄ±nda ise herhangi bir sorun yok.</p><h3>BaÅŸlayalÄ±m</h3><p>Xcode 11 betaâ€™yÄ± aÃ§Ä±p bir proje oluÅŸturun. Bu yazÄ±da uygulama UIKit ile geliÅŸtirilmiÅŸ olacak dilerseniz SwiftUIâ€™da kullanabilirsiniz herhangi bir fark bulunmuyor.</p><p>Proje ayarlarÄ±mÄ±zÄ± yapalÄ±m. <img src="/upload-images/SigninWithApple/upload-270232875.png" width="100%"/></p><img src="/upload-images/SigninWithApple/upload-299754126.png" width="100%"/><p>Proje ayarlarÄ±mÄ±zdan sonra kodumuza baÅŸlayabiliriz. YapacaÄŸÄ±mÄ±z ilk iÅŸ AuthenticationServicesâ€™Ä± ViewControllerâ€™Ä±mÄ±za import etmek</p><pre><code><span class="keyword">import</span> AuthenticationServices
</code></pre><p>Åimdi AuthenticationServicesâ€™ten ASAuthorizationAppleIDButtonâ€™u kullanacaÄŸÄ±z, esasÄ±nda bu bir buton ve UIControl kÃ¼tÃ¼phanesine baÄŸlÄ±. Bu da demek oluyor ki bunu bir buton gibi dÃ¼ÅŸÃ¼neceÄŸiz ve target verip farklÄ± bir fonksiyonda bunun iÅŸlemlerini yapacaÄŸÄ±z. &gt; gist 5451b0c844f8c627aeca642387f0747d</p><p>Butonumuzu oluÅŸturduk, aksiyon iÅŸlemini nerede yapacaÄŸÄ±nÄ± sÃ¶yledik ve hangi event ile tetikleneceÄŸini belirledik. ArdÄ±ndan viewâ€™umuzun merkezine ekledik.</p><h4>Bir gÃ¶z atalÄ±m nasÄ±l gÃ¶rÃ¼nÃ¼yor ?</h4><img src="/upload-images/SigninWithApple/upload-899708053.png" width="100%"/><p>Åimdi sÄ±ra geldi bu iÅŸin merkezine. Butonumuzun aksiyon metoduna gelelim.</p><p>Burda ilk olarak AppleID Provider kullanacaÄŸÄ±z. Bu bize Bilgileri saÄŸlayacak. Buna bir request oluÅŸturarak hangi bilgileri alabileceÄŸimizi belirliyoruz. Åu an kullanÄ±labilir iki veri bulunuyor. Biri e-Posta diÄŸeri tam isim. AppleID Providerâ€™e bir request oluÅŸturduk ve buna bize email ve tam isimi vermesini istedik. Sonra bir Controller oluÅŸturduk. Bu controllerâ€™a gereken delegasyon ve iÃ§erik saÄŸlayÄ±cÄ±sÄ±nÄ± ( presentationContextProvider ) self olarak verdik.</p><pre><code><span class="keyword">@objc func</span> authAppleID()
    {
        <span class="keyword">let</span> appleIDProvider = <span class="type">ASAuthorizationAppleIDProvider</span>()
        <span class="keyword">let</span> authRequest = appleIDProvider.<span class="call">createRequest</span>()
        authRequest.<span class="property">requestedScopes</span> = [.<span class="dotAccess">email</span>, .<span class="dotAccess">fullName</span>]
        
        <span class="keyword">let</span> authController = <span class="type">ASAuthorizationController</span>(authorizationRequests: [authRequest])
        authController.<span class="property">presentationContextProvider</span> = <span class="keyword">self</span>
        authController.<span class="property">delegate</span> = <span class="keyword">self</span>
        authController.<span class="call">performRequests</span>()
        
    }</pre></code><p>Åimdi aslÄ±nda iÅŸlem bitti ancak daha da iyileÅŸtirmek en iyisi. Bir extension ekleyelim. Bu extension ASAuthorizationControllerDelegate, ASAuthorizationControllerPresentationContextProvidingâ€™dan kalÄ±tÄ±mÄ±nÄ± alsÄ±n.</p><p>Xcodeâ€™un istediÄŸini yapalÄ±m ve presentationAnchor fonksiyonunu implementde edelim. Ä°Ã§ine geri dÃ¶nÃ¼ÅŸ deÄŸerini verelim.</p><pre><code><span class="keyword">return self</span>.<span class="property">view</span>.<span class="property">window</span>!
</code></pre><p>Åimdi de giriÅŸ yapÄ±lma iÅŸleminde hata oluÅŸup olmadÄ±ÄŸÄ±nÄ±, baÅŸarÄ±lÄ± giriÅŸ yapÄ±lmÄ±ÅŸsa eÄŸer kullanÄ±cÄ± bilgilerini alalÄ±m.</p><pre><code><span class="keyword">extension</span> <span class="type">ViewController</span>: <span class="type">ASAuthorizationControllerDelegate</span>, <span class="type">ASAuthorizationControllerPresentationContextProviding</span>
{
    <span class="keyword">func</span> authorizationController(controller: <span class="type">ASAuthorizationController</span>, didCompleteWithAuthorization authorization: <span class="type">ASAuthorization</span>)
    {
        <span class="keyword">guard let</span> appleIDCredential = authorization.<span class="property">credential</span> <span class="keyword">as</span>? <span class="type">ASAuthorizationAppleIDCredential</span> <span class="keyword">else</span> { <span class="keyword">return</span> }
        
        <span class="call">print</span>(<span class="string">"USER:</span> \(appleIDCredential.<span class="property">user</span>)<span class="string">"</span>)
        <span class="call">print</span>(<span class="string">"EMAIL:</span> \(appleIDCredential.<span class="property">email</span>!)<span class="string">"</span>)
        <span class="call">print</span>(<span class="string">"FULL NAME:</span> \(appleIDCredential.<span class="property">fullName</span>!)<span class="string">"</span>)
    }
    
    <span class="keyword">func</span> presentationAnchor(for controller: <span class="type">ASAuthorizationController</span>) -&gt; <span class="type">ASPresentationAnchor</span>
    {
        <span class="keyword">return self</span>.<span class="property">view</span>.<span class="property">window</span>!
    }
}</pre></code><p>Ä°ÅŸleminizin bir sorunla karÅŸÄ±laÅŸmadÄ±ÄŸÄ±nÄ± doÄŸrulamak iÃ§in guard let ile kontrolÃ¼mÃ¼zÃ¼ yaptÄ±k. EÄŸer sorun yoksa kayÄ±t yapan kullanÄ±cÄ±nÄ±n verilerini konsola yazdÄ±rdÄ±k.</p><img src="/upload-images/SigninWithApple/upload-558219504.png" width="100%"/><p>)</p><p>Bilgilerimizi gerÃ§ek email ile kullanÄ±rsak ne oluyor, Appleâ€™Ä±n gizlilik iÃ§in oluÅŸturduÄŸu mail ile kullanÄ±rsak kullanÄ±cÄ± bilgileri aÅŸaÄŸÄ±daki gibi oluyor.</p><img src="/upload-images/SigninWithApple/upload-403950479.png" width="100%"/><p>Appleâ€™Ä±n bu WWDCâ€™de tanÄ±ttÄ±ÄŸÄ± gÃ¼zel bir Ã¶zelliÄŸi elimden geldiÄŸince anlattÄ±m, sorularÄ±nÄ±z olursa yorum kÄ±smÄ±na ya da blogumun iletiÅŸim kÄ±smÄ±ndan bana ulaÅŸabilirsiniz, bugsÄ±z gÃ¼nler ğŸ™‚</p><p>Kodlar Ä°Ã§in <a href="http://https://github.com/yusufozgul/SignWithAppleTutorial "GitHub HesabÄ±m"">GitHub HesabÄ±m</a></p><hr><p>Kaynaklar:</p><p>https://medium.com/q42-engineering/sign-in-with-apple-e45325cd9d0</p><p>https://developer.apple.com/sign-in-with-apple/get-started/</p></div></div></div><footer><p><a href="https://github.com/johnsundell/publish">Generated using Publish</a></p><p><a href="/feed.rss">RSS feed</a></p><p><a href="https://github.com/yusufozgul">Developed Yusuf Ã–zgÃ¼l</a></p></footer></body></html>