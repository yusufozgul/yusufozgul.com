<!DOCTYPE html><html lang="tr"><head><meta charset="UTF-8"/><meta property="og:site_name" content="Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio"/><link rel="canonical" href="https://yusufozgul.com/blogs/observerPattern"/><meta name="twitter:url" content="https://yusufozgul.com/blogs/observerPattern"/><meta property="og:url" content="https://yusufozgul.com/blogs/observerPattern"/><title>Swift Observer Pattern | Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio</title><meta name="twitter:title" content="Swift Observer Pattern | Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio"/><meta property="og:title" content="Swift Observer Pattern | Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio"/><meta name="description" content="BazÄ± durumlarda oluÅŸan bir olay ile istediÄŸimiz yerin tetiklenmesi ve bir iÅŸlem yapmasÄ± gerekebilir. Bu durumda nasÄ±l yapabileceÄŸimize bakalÄ±m."/><meta name="twitter:description" content="BazÄ± durumlarda oluÅŸan bir olay ile istediÄŸimiz yerin tetiklenmesi ve bir iÅŸlem yapmasÄ± gerekebilir. Bu durumda nasÄ±l yapabileceÄŸimize bakalÄ±m."/><meta property="og:description" content="BazÄ± durumlarda oluÅŸan bir olay ile istediÄŸimiz yerin tetiklenmesi ve bir iÅŸlem yapmasÄ± gerekebilir. Bu durumda nasÄ±l yapabileceÄŸimize bakalÄ±m."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/gallery.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/upload-images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Yusuf Ã–zgÃ¼l | Blog | Resume | Portfolio"/><meta name="twitter:image" content="https://yusufozgul.com/upload-images/"/><meta property="og:image" content="https://yusufozgul.com/upload-images/"/></head><body class="main-wrapper"><header><link rel="stylesheet" href="/navigationStyle.css" type="text/css"/><nav class="header navBar"><div class="navArea"><input type="checkbox" id="check"/><label for="check"><img src="/upload-images/base/menu-icon.svg" width="30" height="30" class="checkbtn"/></label><label class="logo"><a href="/">Yusuf Ã–zgÃ¼l</a></label><ul class="navContent" id="hoverEnabled"><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li><li><a href="/projects">Projects</a></li><li><a href="/blogs" class="active">Blog</a></li></ul></div></nav></header><div class="wrapper"><h2 class="post-title">Swift Observer Pattern</h2><a><p>September 11, 2020<br/>Reading 13 minutes</p></a><ul class="tag-list"><li class="swift"><a href="/tags/swift">Swift</a></li><li class="software"><a href="/tags/software">Software</a></li></ul><div class="post-description"><div><p>Observer'Ä±n TÃ¼rkÃ§e karÅŸÄ±lÄ±ÄŸÄ± gÃ¶zlemci olarak geÃ§iyor. KodlarÄ±mÄ±zda gÃ¶zlemci ise neyi gÃ¶zleyebilir? Bu sorunun bir Ã§ok cevabÄ± olabilir Ã¶rneÄŸin bir deÄŸiÅŸkenimizde deÄŸiÅŸiklik yaparÄ±z ve deÄŸiÅŸkenimiz deÄŸiÅŸtiÄŸi zaman bir baÅŸka iÅŸlem tetiklenebilir. BaÅŸka bir Ã¶rnek olarak arayÃ¼zde bir metin olsun ve bu metin bir baÅŸka sÄ±nÄ±ftan gelen verilere gÃ¶re sÃ¼rekli gÃ¼ncellensin. Observer pattern'i kurarak deÄŸiÅŸkeni istediÄŸimiz yerden deÄŸiÅŸtirsek bile sadece deÄŸiÅŸtirmemiz yetsin. Bu yazÄ± ile basit ÅŸekilde bir SwiftUI projesi yaparak observer pattern'i inceleyelim.</p><h4>BaÅŸlarken</h4><p>&nbsp; Her ne kadar bu yazÄ±da SwiftUI vee Combine ikilisini kullanacak olsam da mevcut UIKit uygulamalarÄ±nda deÄŸiÅŸkene verilecek <strong>didSet</strong> Ã¶zelliÄŸi ya da <strong>Notification Center</strong> kullanarak yapÄ±labilir. &nbsp;</p><pre><code><span class="keyword">var</span> value = <span class="number">0</span> {
    <span class="keyword">didSet</span> {
        <span class="call">print</span>(<span class="string">"Value changed, new value:</span> \(value)<span class="string">"</span>)
    }
}

value = <span class="number">10</span>
</code></pre><p>Ã–rnekte gÃ¶rÃ¼ldÃ¼ÄŸÃ¼ gibi value deÄŸiÅŸkeni deÄŸiÅŸtirildiÄŸi zaman <strong>didSet</strong> Ã§alÄ±ÅŸÄ±p iÃ§erisine yazdÄ±klarÄ±mÄ±zÄ± gerÃ§ekleÅŸtirecek. &nbsp; &nbsp;</p><hr><h3>BaÅŸlÄ±yoruz</h3><p>&nbsp;</p><p>SwiftUI ile gelen Ã¶zellikler iÃ§erinde bu konuda iÅŸimize yarayacak iki <strong>property wrapper</strong> var. Bu <strong>property wrapper</strong> konusunda blog yazÄ±sÄ± yazmayÄ± planlÄ±yorum ancak ÅŸimdilik kÄ±saca bahsedeyim. <strong>Property wrapper</strong> bir deÄŸiÅŸkene ekstra Ã¶zellikler katmamÄ±za olanak saÄŸlÄ±yor. DeÄŸiÅŸken Ã¼zerinde yapÄ±lacak deÄŸiÅŸikliklerle ekstra Ã¶zellikler katabiliyoruz. Åimdi bize hangileri lazÄ±m:</p><ul><li>ObservableObject</li><li>@Published</li><li>@ObservedObject</li></ul><p>ObservableObject aslÄ±nda bir <strong>Property wrapper</strong> deÄŸil. O bir protokol. Biz hangi sÄ±nÄ±fÄ±mÄ±zdaki deÄŸiÅŸiklikleri observe etmek istiyorsak bu sÄ±nÄ±fÄ±mÄ±za ObservableObject protokolÃ¼nÃ¼ implemente ederek observe edilebilirlik Ã¶zelliÄŸini kazandÄ±rÄ±yoruz. &nbsp; @Published ise observe edilecek olan deÄŸiÅŸkenimiz yani bu deÄŸiÅŸkendeki deÄŸiÅŸiklikler sonrasÄ± aksiyon alÄ±nacak. &nbsp; Geldik sonuncusuna @ObservedObject bu bir sÄ±nÄ±ftan instance oluÅŸturduÄŸumuz zaman bu sÄ±nÄ±fÄ± observe et, deÄŸiÅŸiklikleri izle demiÅŸ oluyoruz. &nbsp; &nbsp; Ä°lk olarak basit bir data class oluÅŸturalÄ±m.</p><pre><code><span class="keyword">import</span> SwiftUI

<span class="keyword">class</span> DataClass: <span class="type">ObservableObject</span> {
    <span class="keyword">@Published var</span> value = <span class="number">0</span>
    <span class="keyword">var</span> value2 = <span class="number">0</span>
    
    <span class="keyword">func</span> changeValue() {
        value = <span class="type">Int</span>.<span class="call">random</span>(in: <span class="number">0</span>...<span class="number">100</span>)
    }
    
    <span class="keyword">func</span> changeValue2() {
        value2 = <span class="type">Int</span>.<span class="call">random</span>(in: <span class="number">0</span>...<span class="number">100</span>)
    }
}
</code></pre><p>Ã–zellikle incelemek iÃ§in iki adet deÄŸiÅŸken ekledim biri @Published diÄŸeri deÄŸil. Olay oldukÃ§a basit fonksiyonlar Ã§aÄŸÄ±rÄ±lÄ±r ve deÄŸiÅŸkenler random olarak bir sayÄ± alÄ±rlar.</p><p>&nbsp; &nbsp; Åimdi ise arayÃ¼z kodlarÄ±mÄ±zÄ± inceleyim:</p><pre><code><span class="keyword">import</span> SwiftUI

<span class="keyword">struct</span> ContentView: <span class="type">View</span> {
    <span class="keyword">@ObservedObject var</span> data = <span class="type">DataClass</span>()
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="type">Spacer</span>()
            <span class="type">Text</span>(<span class="type">String</span>(data.<span class="property">value</span>))
            <span class="type">Text</span>(<span class="type">String</span>(data.<span class="property">value2</span>))
            <span class="type">Spacer</span>()
            <span class="type">Button</span>(<span class="string">"Change 1"</span>) {
                data.<span class="call">changeValue</span>()
            }
            <span class="type">Button</span>(<span class="string">"Change 2"</span>) {
                data.<span class="call">changeValue2</span>()
            }
            <span class="type">Spacer</span>()
        }
    }
}
</code></pre><p>Basit ÅŸekilde @ObservedObject ile DataClass'tan bir intance oluÅŸturduk. ArayÃ¼zde bir VStack iÃ§erisinde Ä°ki adet text ve iki adet buton koyduk. AdÄ±m adÄ±m Ã§alÄ±ÅŸtÄ±rÄ±p neler oluyor bakalÄ±m: &nbsp; &nbsp; 1. BaÅŸlangÄ±Ã§ta her ikisinden beklendiÄŸi gibi 0 olarak ekrana yazÄ±ldÄ±. 2. <em>Change 1</em> butonuna bastÄ±ÄŸÄ±mÄ±z anda ilk metnimiz random bir deÄŸer ile deÄŸiÅŸti. 3. <em>Change 2</em> butonuna bastÄ±ÄŸÄ±mÄ±z anda ise ekranda herhangi bir deÄŸiÅŸiklik gÃ¶remedik. ğŸ¤” 4. Tekrar <em>Change 1</em> butonuna bastÄ±ÄŸÄ±mÄ±z anda ise her iki metnimizin de deÄŸiÅŸtiÄŸini gÃ¶rdÃ¼k. ğŸ˜¯ğŸ˜¯ğŸ˜¯</p><p>&nbsp; &nbsp; Ã‡Ä±ktÄ±larÄ± inceleyelim. BeklendiÄŸi gibi <em>Change 1</em> butonu iÅŸlevini yerine getirdi. <em>value2</em> deÄŸiÅŸkeni @Published Ã¶zelliÄŸine sahip olmadÄ±ÄŸÄ± iÃ§in <em>Change 2</em> butonuna basmak pek bir anlam ifade etmedi. Ancak neden <em>Change 2</em> butonuna bastÄ±ktan sonra <em>Change 1</em> butonuna basÄ±nca ikinci metin deÄŸiÅŸti?</p><p>SwiftUI arayÃ¼z deÄŸiÅŸikliklerinde ilgili kÄ±smÄ± tekrar oluÅŸturmak yerine arayÃ¼zÃ¼n tamamÄ±nÄ± oluÅŸturduÄŸu iÃ§in yeniden oluÅŸturma sÄ±rasÄ±nda <em>value2</em> deÄŸiÅŸkeninin deÄŸerini gidip tekrar okumasÄ± gerekti ve veriyi alÄ±rken gÃ¼ncellenmiÅŸ haliyle aldÄ± bu sebeple gÃ¼ncellendi.</p><hr><p>&nbsp; &nbsp;</p><p>Bu yazÄ±mda kÄ±saca Observer Pattern konusunu SwiftUI ile anlatmaya Ã§alÄ±ÅŸtÄ±m. Bana sorularÄ±nÄ±z iÃ§in <a href="/contact">iletiÅŸim</a> sayfasÄ±nÄ± kullanabilirsiniz, teÅŸekkÃ¼r ederim :)</p></div></div></div><footer><p><a href="https://github.com/johnsundell/publish">Generated using Publish</a></p><p><a href="/feed.rss">RSS feed</a></p><p><a href="https://github.com/yusufozgul">Developed Yusuf Ã–zgÃ¼l</a></p></footer></body></html>